:root{--accent:#1e88e5;--bg:#0f1720;--panel:#0b1220;--text:#e6eef6}
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial;color:var(--text);background:linear-gradient(180deg,#071018 0%,#081323 100%)}

.app{
	min-height:100svh;
	min-height:100vh;
	display:grid;
	grid-template-rows:auto 1fr auto;
}

.header{
	position:sticky;
	top:0;
	z-index:2;
	display:flex;
	align-items:center;
	gap:12px;
	padding:12px;
	padding-top:calc(12px + env(safe-area-inset-top));
	background:rgba(0,0,0,0.25);
	backdrop-filter:blur(10px);
	border-bottom:1px solid rgba(255,255,255,0.06);
}

.header-title{min-width:0;flex:1}
.song-title{font-weight:700;font-size:16px;line-height:1.2;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.song-meta{font-size:12px;opacity:0.78;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}

.content{padding:12px}

.viewer{
	height:100%;
	overflow:auto;
	-webkit-overflow-scrolling:touch;
	overflow-anchor:none;
	overscroll-behavior:contain;
	padding:16px;
	border-radius:12px;
	background:linear-gradient(180deg,rgba(255,255,255,0.03),rgba(0,0,0,0.28));
	border:1px solid rgba(255,255,255,0.06);
	font-size:20px;
	line-height:1.6;
}

.line{white-space:pre-wrap;margin:8px 0}
.chord{color:#ffb86b;font-weight:800;margin-right:6px;background:rgba(255,184,107,0.06);padding:0 6px;border-radius:6px}

.controls{
	position:sticky;
	bottom:0;
	z-index:2;
	padding:10px 12px;
	padding-bottom:calc(10px + env(safe-area-inset-bottom));
	background:rgba(0,0,0,0.30);
	backdrop-filter:blur(10px);
	border-top:1px solid rgba(255,255,255,0.06);
}

.controls-row{display:flex;gap:10px;align-items:center;justify-content:space-between;flex-wrap:wrap}
.controls-row-secondary{margin-top:10px;gap:12px}

.control{display:grid;grid-template-columns:auto 1fr auto;gap:8px;align-items:center;flex:1;min-width:220px}
.control-label{font-size:12px;opacity:0.85}
.control-value{font-size:12px;opacity:0.85;min-width:3ch;text-align:right}

.toggle{display:flex;gap:8px;align-items:center;font-size:12px;opacity:0.9;user-select:none}
.toggle input{transform:scale(1.1)}

.button,button{
	background:var(--panel);
	color:var(--text);
	border:1px solid rgba(255,255,255,0.10);
	padding:10px 12px;
	border-radius:10px;
	cursor:pointer;
	font-size:14px;
}

.button:active,button:active{transform:translateY(1px)}

input[type=range]{width:100%}

.scrim{
	position:fixed;
	inset:0;
	z-index:20;
	background:rgba(0,0,0,0.55);
}

.drawer{
	position:fixed;
	left:0;
	top:0;
	bottom:0;
	z-index:21;
	width:min(420px, 92vw);
	padding:12px;
	padding-top:calc(12px + env(safe-area-inset-top));
	background:rgba(0,0,0,0.35);
	backdrop-filter:blur(12px);
	border-right:1px solid rgba(255,255,255,0.10);
	display:flex;
	flex-direction:column;
}

.drawer-header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:12px}
.drawer-title{font-weight:700}

.song-list{display:flex;flex-direction:column;gap:8px;overflow:auto;padding-right:4px}
.song-item{padding:10px 10px;border-radius:10px;background:rgba(255,255,255,0.04);cursor:pointer;border:1px solid rgba(255,255,255,0.06)}
.song-item.active{background:linear-gradient(90deg,rgba(255,255,255,0.04),rgba(0,0,0,0.10));border-color:rgba(255,255,255,0.12)}
.song-item:hover{background:rgba(255,255,255,0.06)}

@media (min-width: 980px){
	.app{grid-template-columns:360px 1fr;grid-template-rows:auto 1fr auto;grid-template-areas:"drawer header" "drawer content" "drawer controls"}
	.header{grid-area:header}
	.content{grid-area:content}
	.controls{grid-area:controls}
	.drawer{grid-area:drawer;position:sticky;top:0;left:auto;bottom:auto;height:100svh;height:100vh;width:auto;border-right:1px solid rgba(255,255,255,0.08)}
	.scrim{display:none}
	#openSongs{display:none}
}

@media (prefers-reduced-motion: reduce){
	.button:active,button:active{transform:none}
}
